import random

# Verifica si un número es primo
def es_primo(n):
    if n <= 1:
        return False
    if n <= 3:
        return True
    if n % 2 == 0 or n % 3 == 0:
        return False
    i = 5
    while i * i <= n:
        if n % i == 0 or n % (i + 2) == 0:
            return False
        i += 6
    return True

# Genera un número aleatorio entre 1 y 6 (simula el lanzamiento de un dado)
def lanzar_dado():
    return random.randint(1, 6)

# Solicita el número de jugadores
print("¿Cuántas personas van a jugar?")
num_jugadores = int(input())

# Inicializa los puntos de los jugadores
puntos = [0] * num_jugadores
ganadores = []
primos = []

# Bucle principal del juego para cada jugador
for jugador in range(num_jugadores):
    continuar = True
    print(f"\nTurno del Jugador {jugador + 1}:")
    
    while continuar:
        if puntos[jugador] == 23:
            print("Ya tienes 23. No puedes lanzar más dados.")
            continuar = False
            break
        
        # Lanza dos dados
        dado1 = lanzar_dado()
        dado2 = lanzar_dado()
        suma = dado1 + dado2
        print(f"Has lanzado {dado1} y {dado2}, sumando {suma}.")
        
        if dado1 == dado2:
            print("¡Has sacado dobles! Lanzarás 3 dados más.")
            dado3 = lanzar_dado()
            dado4 = lanzar_dado()
            dado5 = lanzar_dado()
            suma += dado3 + dado4 + dado5
            print(f"Tus dados adicionales son {dado3}, {dado4}, y {dado5}, sumando {dado3 + dado4 + dado5}.")
        
        if suma == 12:
            print("Has sacado un 12. Lanzarás solo 1 dado adicional.")
            dado6 = lanzar_dado()
            suma += dado6
            print(f"El dado adicional es {dado6}, sumando {dado6} a tu total.")
        
        puntos[jugador] += suma
        print(f"Tu total actual es {puntos[jugador]}.")
        
        if puntos[jugador] >= 23:
            if puntos[jugador] == 23:
                print("¡Has llegado a 23!")
                continuar = False
                ganadores.append(jugador)
            else:
                print("Has superado 23. No puedes lanzar más dados.")
                continuar = False
                break
        
        print("¿Quieres lanzar nuevamente? (s/n)")
        respuesta = input().strip().lower()
        if respuesta != 's':
            continuar = False

# Determina el ganador
print("\nResultados finales:")
ganador = -1
mayor_puntaje = 0

for i in range(num_jugadores):
    if puntos[i] == 23:
        primos.append(i)
    elif puntos[i] < 23 and puntos[i] > mayor_puntaje:
        mayor_puntaje = puntos[i]
        ganador = i

if primos:
    print(f"El ganador es el Jugador {max(primos) + 1} con un número primo.")
else:
    if ganador != -1:
        print(f"El ganador es el Jugador {ganador + 1} con el puntaje más alto sin exceder 23.")
    else:
        print("Ningún jugador ganó.")
